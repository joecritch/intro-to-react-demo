<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>To-do list, lol</title>
</head>
<body>

  <div id="app"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
  <script src="https://fb.me/react-0.14.7.js"></script>
  <script src="https://fb.me/react-dom-0.14.7.js"></script>
  <script type="text/babel">

  var App = React.createClass({
    getInitialState: function() {
      return { items: [ 'react', 'redux', 'flux' ] }
    },
    onButtonClick: function(key) {
      var items = this.state.items;
      this.setState({
        items: items.filter(function(item, ii) {
          return ii !== key;
        })
      });
    },
    onFormSubmit: function(e) {
      e.preventDefault();
      var items = this.state.items.slice(0);
      items.push(this.refs.input.value);
      this.refs.input.value = '';
      this.setState({
        items: items
      });
    },
    render: function() {
      return (
        <div>
          <h1>To-do list, lol</h1>
          <form onSubmit={this.onFormSubmit}>
            <input type="text" ref="input" />
          </form>
          <ul>
            {this.state.items.map(function(item, key) {
              return (<li key={key}>
                {item}
                <button onClick={function() {
                  this.onButtonClick(key);
                }.bind(this)}>Complete</button>
              </li>);
            }.bind(this))}
          </ul>
        </div>
      );
    }
  });

  ReactDOM.render(<App />, document.getElementById('app'));

  </script>

</body>
</html>
